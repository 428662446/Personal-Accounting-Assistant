添加金额处理日志

一、初步设计思路
前后端传递string类型金额
→输入处理（空格清除前置零清除→规范格式 （去掉所有正负号，按类型重新添加）+数字+单个小数点（可能要补，另外多个小数点处理？）+数字（可能要补00，仅记录两位，直接去多余）→万一用户输出各种牛马蛇神或者过多数字报错（因此传递string还是float比较好））→去掉小数点转整数（是否转正整数存储？）存储（分，int），同时type记录正负→用于统计运算→转回string类型传出统计结果

二、具体思路：
1. 前后端传递金额使用字符串
优点：避免前端语言和后端Go语言中浮点数的不精确表示。
缺点：需要前后端都进行字符串到整数的转换，并且要处理格式问题

2. 输入处理：
2.1 可自动处理部分
2.1.1 清除金额所带正负号、分号、空格和前置零
2.1.2 由type标签类型（支出和收入）决定正负
2.2 自动处理后需用户检查部分
2.2.1 小数点后超过两位
2.2.2 多个小数点（按第一个截取）
2.3 直接拒绝部分
2.3.1 牛马蛇神字符
2.3.2 零值"0", "0.00", "."
2.3.4 边界：过大过小数


3. 转换规则：金额字符串转换为分（正整数）存储
3.1 输入的数字小数点后超过两位，四舍五入或者直接截断
3.2 输入的是整数或小数点后一位，则自动补成两位小数

4. 存储：使用整数存储（单位：分），Type字段记录是收入还是支出

5. 统计运算：在数据库中使用整数进行统计，避免浮点误差

三、具体流程设计
1.前端：
1.1 强制二选一选择类型（收入/支出）
1.2 输入金额（前端实时格式化：只能成功输入数字和一个小数点，并自动格式化为两位小数）
1.3 点击完成按键，前端将金额字符串（如"123.46"）发送到后端
1.4 等待后端传递结果，报错或提示确认

2. 后端：
2.1 接收金额字符串，进行二次验证清洗
2.2 返回结果至前端，待用户确认
2.3 确认后，将金额字符串转换为分（整数）：
字符串按小数点拆分成整数部分和两位小数->计算总分
2.4 存储：类型（收入/支出）和金额（分）

四、代码实现设计（后端）
0. 在utils包中添加金额处理文件amount.go：
0.1  Amount 金额类型，内部存储为分（整数）
0.2 清理输入cleanAmountString()
0.3 验证金额合法validateAmountFormat()
0.4 元转分 parseToCents()
0.5 分转元 CentsToparse()
0.6 从字符串创建金额 NewAmountFromString()
0.7 从分创建金额 NewAmountFromCents()

1. 修改数据库transactions表的amount字段为INTEGER，表示分，正数表示收入，负数表示支出
2. 修改模型Transaction，将Amount改为int64（用于统计计算），并增加AmountString（用于显示）
3. 修改database层，接受int64的金额
4. 修改handlers层（？），RecordTransaction函数，金额字符串清洗->存入AmountString；并转整数->存入Amount
5. 错误处理分级（感谢deepseek的伟大建议）
const (
    LevelAutoFix ValidationLevel = iota  // 可自动修复的问题
    LevelRequireConfirm                  // 需要用户确认的修正
    LevelReject                         // 必须拒绝的无效输入
)
type AmountError struct {
    Level    ValidationLevel
    Message  string
    Original string
    Fixed    string // 自动修复后的值
}











